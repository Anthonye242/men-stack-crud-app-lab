<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= typeof car !== 'undefined' && car ? 'Edit Car' : 'Add New Car' %></title>
</head>
<body>
    <h1><%= typeof car !== 'undefined' && car ? 'Edit Car' : 'Add New Car' %></h1>
    <% if (typeof error !== 'undefined' && error) { %>
        <p style="color: red;"><%= error %></p>
    <% } %>
    <form action="<%= typeof car !== 'undefined' && car ? `/cars/${car._id}` : '/cars' %>" method="POST">
        <label for="make">Make:</label>
        <input type="text" name="make" value="<%= typeof car !== 'undefined' && car ? car.make : '' %>" required><br>
        <label for="model">Model:</label>
        <input type="text" name="model" value="<%= typeof car !== 'undefined' && car ? car.model : '' %>" required><br>
        <label for="year">Year:</label>
        <input type="number" name="year" value="<%= typeof car !== 'undefined' && car ? car.year : '' %>" required><br>
        <label for="color">Color:</label>
        <input type="text" name="color" value="<%= typeof car !== 'undefined' && car ? car.color : '' %>" required><br>
        <label for="price">Price:</label>
        <input type="number" name="price" value="<%= typeof car !== 'undefined' && car ? car.price : '' %>" required><br>
        <label for="totalMiles">Total Miles:</label>
        <input type="number" name="totalMiles" value="<%= typeof car !== 'undefined' && car ? car.totalMiles : '' %>" required><br>
        <label for="fuelType">Fuel Type:</label>
        <select name="fuelType" required>
            <option value="electric" <%= typeof car !== 'undefined' && car && car.fuelType === 'electric' ? 'selected' : '' %>>Electric</option>
            <option value="gas" <%= typeof car !== 'undefined' && car && car.fuelType === 'gas' ? 'selected' : '' %>>Gas</option>
            <option value="hybrid" <%= typeof car !== 'undefined' && car && car.fuelType === 'hybrid' ? 'selected' : '' %>>Hybrid</option>
        </select><br>
        <button type="submit"><%= typeof car !== 'undefined' && car ? 'Update Car' : 'Add Car' %></button>
    </form>
    <a href="/cars">Back to all cars</a>
</body>
</html>